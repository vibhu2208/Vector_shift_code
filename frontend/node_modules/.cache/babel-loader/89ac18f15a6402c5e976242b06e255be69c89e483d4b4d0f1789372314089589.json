{"ast":null,"code":"var _jsxFileName = \"/home/krishna/Desktop/vector/frontend/src/nodes/textNode.js\",\n  _s = $RefreshSig$();\nimport { BaseNode } from './BaseNode';\nimport { useStore } from '../store';\nimport { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TextNode = ({\n  id,\n  data\n}) => {\n  _s();\n  const updateNodeField = useStore(state => state.updateNodeField);\n  const [variables, setVariables] = useState([]);\n  const textareaRef = useRef(null);\n  const containerRef = useRef(null);\n  const extractVariables = text => {\n    const regex = /{{\\s*([a-zA-Z_$][\\w$]*)\\s*}}/g;\n    const matches = [...text.matchAll(regex)];\n    return [...new Set(matches.map(match => match[1]))];\n  };\n  useEffect(() => {\n    if (data.text) {\n      setVariables(extractVariables(data.text));\n    }\n  }, [data.text]);\n  const variableHandles = variables.map((v, i) => ({\n    id: `input-${v}`,\n    type: 'target',\n    position: 'left',\n    style: {\n      top: `${50 + i * 25}px`\n    },\n    label: v\n  }));\n  const handleInput = e => {\n    const textarea = textareaRef.current;\n    const container = containerRef.current;\n    if (textarea && container) {\n      textarea.style.height = 'auto';\n      textarea.style.height = `${textarea.scrollHeight}px`;\n\n      // Dynamically set container width based on text length\n      const textLength = textarea.value.length;\n      const width = Math.max(200, Math.min(600, textLength * 8));\n      container.style.width = `${width}px`;\n\n      // Set node height based on content\n      const height = Math.max(80, textarea.scrollHeight + 60);\n      container.style.height = `${height}px`;\n    }\n    updateNodeField(id, 'text', e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      display: 'inline-block'\n    },\n    children: /*#__PURE__*/_jsxDEV(BaseNode, {\n      id: id,\n      data: data,\n      title: \"Text\",\n      outputs: [{\n        id: 'output',\n        label: 'Output'\n      }],\n      inputs: variableHandles,\n      fields: [{\n        type: 'textarea',\n        name: 'text',\n        label: 'Text',\n        defaultValue: '{{input}}',\n        ref: textareaRef,\n        rows: 1,\n        style: {\n          width: '100%',\n          resize: 'none',\n          overflow: 'hidden',\n          minHeight: '40px',\n          padding: '8px',\n          boxSizing: 'border-box',\n          fontFamily: 'monospace'\n        },\n        onInput: handleInput\n      }],\n      onFieldChange: (field, val) => updateNodeField(id, field, val)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"BvcOL51YUVAJyutGefDvU1oyrGU=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["BaseNode","useStore","useEffect","useRef","useState","jsxDEV","_jsxDEV","TextNode","id","data","_s","updateNodeField","state","variables","setVariables","textareaRef","containerRef","extractVariables","text","regex","matches","matchAll","Set","map","match","variableHandles","v","i","type","position","style","top","label","handleInput","e","textarea","current","container","height","scrollHeight","textLength","value","length","width","Math","max","min","target","ref","display","children","title","outputs","inputs","fields","name","defaultValue","rows","resize","overflow","minHeight","padding","boxSizing","fontFamily","onInput","onFieldChange","field","val","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/krishna/Desktop/vector/frontend/src/nodes/textNode.js"],"sourcesContent":["import { BaseNode } from './BaseNode';\r\nimport { useStore } from '../store';\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nexport const TextNode = ({ id, data }) => {\r\n  const updateNodeField = useStore((state) => state.updateNodeField);\r\n  const [variables, setVariables] = useState([]);\r\n  const textareaRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n\r\n  const extractVariables = (text) => {\r\n    const regex = /{{\\s*([a-zA-Z_$][\\w$]*)\\s*}}/g;\r\n    const matches = [...text.matchAll(regex)];\r\n    return [...new Set(matches.map(match => match[1]))];\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (data.text) {\r\n      setVariables(extractVariables(data.text));\r\n    }\r\n  }, [data.text]);\r\n\r\n  const variableHandles = variables.map((v, i) => ({\r\n    id: `input-${v}`,\r\n    type: 'target',\r\n    position: 'left',\r\n    style: { top: `${50 + i * 25}px` },\r\n    label: v\r\n  }));\r\n\r\n  const handleInput = (e) => {\r\n    const textarea = textareaRef.current;\r\n    const container = containerRef.current;\r\n\r\n    if (textarea && container) {\r\n      textarea.style.height = 'auto';\r\n      textarea.style.height = `${textarea.scrollHeight}px`;\r\n\r\n      // Dynamically set container width based on text length\r\n      const textLength = textarea.value.length;\r\n      const width = Math.max(200, Math.min(600, textLength * 8));\r\n      container.style.width = `${width}px`;\r\n\r\n      // Set node height based on content\r\n      const height = Math.max(80, textarea.scrollHeight + 60);\r\n      container.style.height = `${height}px`;\r\n    }\r\n\r\n    updateNodeField(id, 'text', e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ display: 'inline-block' }}>\r\n      <BaseNode\r\n        id={id}\r\n        data={data}\r\n        title=\"Text\"\r\n        outputs={[{ id: 'output', label: 'Output' }]}\r\n        inputs={variableHandles}\r\n        fields={[\r\n          {\r\n            type: 'textarea',\r\n            name: 'text',\r\n            label: 'Text',\r\n            defaultValue: '{{input}}',\r\n            ref: textareaRef,\r\n            rows: 1,\r\n            style: {\r\n              width: '100%',\r\n              resize: 'none',\r\n              overflow: 'hidden',\r\n              minHeight: '40px',\r\n              padding: '8px',\r\n              boxSizing: 'border-box',\r\n              fontFamily: 'monospace'\r\n            },\r\n            onInput: handleInput\r\n          }\r\n        ]}\r\n        onFieldChange={(field, val) => updateNodeField(id, field, val)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}